<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="WARN" monitorInterval="30">

    <Properties>
        <Property name="APP_NAME">${spring:spring.application.name:-springboot-app}</Property>
        <Property name="LOG_HOME">logs/${APP_NAME}</Property>
        <Property name="FILE_NAME">${APP_NAME}</Property>

        <!--
            ðŸŽ¨ CodeOmni æžå®¢é…è‰²æ–¹æ¡ˆ
            _________________________________________________________________________________
            %style{%d}{faint}       : æ—¶é—´æˆ³ç°è‰²/æš—æ·¡ (å¼±åŒ–å™ªéŸ³)
            %highlight{%-5level}    : çº§åˆ«é«˜äº® (INFO=ç»¿, WARN=é»„, ERROR=çº¢, DEBUG=é’)
            %style{${sys:PID}}{magenta} : è¿›ç¨‹IDå“çº¢è‰² (Springç»å…¸è‰²)
            %style{- - -}{faint}      : åˆ†éš”ç¬¦æš—æ·¡
            %style{[%15.15t]}{faint,yellow} : çº¿ç¨‹åå›ºå®š15å­—ç¬¦å®½åº¦ï¼Œæš—é»„è‰²
            %style{%-40.40c{1.}}{cyan} : ç±»åå›ºå®š40å­—ç¬¦å®½åº¦ï¼Œé’è‰² (å¯¹é½è¶…çˆ½)
            %msg                    : æ¶ˆæ¯æœ¬ä½“
            %style{%throwable}{red} : å¼‚å¸¸å †æ ˆå¼ºåˆ¶çº¢è‰²
            _________________________________________________________________________________
        -->
        <Property name="CONSOLE_PATTERN">%style{%d{yyyy-MM-dd HH:mm:ss.SSS}}{faint} %highlight{%-5level}{FATAL=Bright
            Red, ERROR=Bright Red, WARN=Bright Yellow, INFO=Bright Green, DEBUG=Bright Cyan, TRACE=Bright White}
            %style{${sys:PID}}{magenta} %style{---}{faint} %style{[%15.15t]}{faint,yellow} %style{%-40.40c{1.}}{cyan} :
            %msg%n%style{%throwable}{red}
        </Property>

        <!-- æ–‡ä»¶æ—¥å¿—æ ¼å¼ (ä¿æŒçº¯æ–‡æœ¬ï¼Œå¯¹é½å³å¯ï¼Œä¸è¦é¢œè‰²) -->
        <Property name="LOG_PATTERN">%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level ${sys:PID} --- [%15.15t] %-40.40c{1.} :
            %msg%n
        </Property>
    </Properties>

    <Appenders>
        <!-- æŽ§åˆ¶å°ï¼šå¼€å‘çŽ¯å¢ƒçš„æ ¸å¿ƒ -->
        <Console name="Console" target="SYSTEM_OUT">
            <!-- Windows ç³»ç»Ÿå¦‚æžœé¢œè‰²ä¹±ç ï¼Œéœ€å¢žåŠ  noConsoleNoAnsi="false" -->
            <PatternLayout pattern="${CONSOLE_PATTERN}"/>
        </Console>

        <!-- Info æ–‡ä»¶ -->
        <RollingRandomAccessFile name="InfoFile"
                                 fileName="${LOG_HOME}/${FILE_NAME}-info.log"
                                 filePattern="${LOG_HOME}/${FILE_NAME}-info-%d{yyyy-MM-dd}-%i.log.gz">
            <immediateFlush>false</immediateFlush>
            <bufferSize>262144</bufferSize>
            <PatternLayout pattern="${LOG_PATTERN}"/>
            <Policies>
                <TimeBasedTriggeringPolicy interval="1"/>
                <SizeBasedTriggeringPolicy size="1 GB"/>
            </Policies>
            <DefaultRolloverStrategy max="50"/>
        </RollingRandomAccessFile>

        <!-- Error æ–‡ä»¶ -->
        <RollingRandomAccessFile name="ErrorFile"
                                 fileName="${LOG_HOME}/${FILE_NAME}-error.log"
                                 filePattern="${LOG_HOME}/${FILE_NAME}-error-%d{yyyy-MM-dd}-%i.log.gz">
            <immediateFlush>false</immediateFlush>
            <bufferSize>262144</bufferSize>
            <PatternLayout pattern="${LOG_PATTERN}"/>
            <Policies>
                <TimeBasedTriggeringPolicy interval="1"/>
                <SizeBasedTriggeringPolicy size="1 GB"/>
            </Policies>
            <DefaultRolloverStrategy max="50"/>
            <Filters>
                <ThresholdFilter level="ERROR" onMatch="ACCEPT" onMismatch="DENY"/>
            </Filters>
        </RollingRandomAccessFile>
    </Appenders>

    <Loggers>
        <Logger name="org.springframework" level="INFO"/>
        <Logger name="org.mybatis" level="DEBUG"/>
        <Logger name="org.mybatis.generator" level="DEBUG"/>

        <!-- ä½ çš„ä¸šåŠ¡åŒ… -->
        <Logger name="thriving.softwood.mapper" level="DEBUG" additivity="false">
            <AppenderRef ref="Console"/>
        </Logger>

        <Root level="INFO" includeLocation="false">
            <AppenderRef ref="Console"/>
            <AppenderRef ref="InfoFile"/>
            <AppenderRef ref="ErrorFile"/>
        </Root>
    </Loggers>

</Configuration>